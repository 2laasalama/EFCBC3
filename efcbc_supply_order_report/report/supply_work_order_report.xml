<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="supply_work_order_report" model="ir.actions.report">
        <field name="name">أمر أسناد وتوريد</field>
        <field name="model">purchase.order</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">efcbc_supply_order_report.supply_work_order_report_template</field>
        <field name="report_file">efcbc_supply_order_report.supply_work_order_report_template</field>
        <field name="print_report_name">'أمر أسناد و توريد - %s' % (object.name).replace('/', '')</field>
        <field name="binding_model_id" eval="False"/>
        <field name="binding_type">report</field>
    </record>

    <template id="supply_work_order_report_template">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="efcbc_report_layout.external_layout">
                    <div class="page" style="direction: rtl;text-align: right;font-size: 20px;line-height: 42px;">
                        <div style="text-align: center;padding: 15px;">
                            <h2 t-if="o.order_type == 'works'">أمـــر أسـنـاد و تـوريـد</h2>
                        </div>
                        <div style="text-align: right;">
                            <div>
                                <span>
                                    السـادة /
                                </span>
                                <t t-esc="o.partner_id.name"/>
                                <div>تحية طيبة وبعد ,,,,,,,,</div>
                            </div>

                            <div>
                                <span>بالإشارة إلى العرض المقدم منكم بتاريخ</span>
                                <t t-esc="context_timestamp(o.date_order).strftime('%Y-%m-%d')"/>
                                <span>وذلك لتنفيذ</span>
                                <span t-esc="','.join(o.order_line.filtered(lambda l: l.product_id.main_type == 'work').mapped('product_id.name'))"/>
                            </div>
                            <div>
                                <span>
                                    وبناء علي توصيه اللجان المختصه بتاريخ
                                </span>
                                <t t-esc="o.committe_recommendation_date"/>
                                <span>
                                    لتنفيذ الاعمال المشار اليها والمعتمده من السلطه المختصه بتاريخ
                                </span>
                                <t t-esc="o.committe_certified_date"/>

                            </div>
                            <div>
                                <span>
                                    نتشرف بإسناد الاعمال المشار اليها بعاليه الي شركتكم الموقره بقيمه اجماليه (
                                </span>
                                <t t-esc="o.total_works_amount"/>
                                <span>)
                                </span>
                                <t t-esc="o.currency_id.with_context(lang='ar_001').amount_to_text(o.total_works_amount)"/>
                                <span>
                                    فقط
                                </span>
                            </div>

                            <div>
                                <span>
                                    وكذلك توريد الاصناف الاتية :
                                </span>
                                <t t-foreach="o.order_line.filtered(lambda l: l.product_id.main_type == 'supply')"
                                   t-as="line">
                                    <span>عدد</span>
                                    <t t-esc="line.product_qty"/>
                                    <span> من الصنف</span>
                                    <t t-esc="o.product_id.name"/>
                                    <span> بقيمة إجمالية (</span>
                                    <t t-esc="line.price_total"/>
                                    <span>)
                                    </span>
                                    <t t-esc="o.currency_id.with_context(lang='ar_001').amount_to_text(line.price_total)"/>
                                    <span>
                                        فقط
                                    </span>
                                    <br></br>


                                </t>
                            </div>

                              <div>
                                <span>
                                    ليصبح اجمالى قمية امرالإسناد والتوريد (
                                </span>
                                <t t-esc="o.amount_total"/>
                                <span>)
                                </span>
                                <t t-esc="o.currency_id.with_context(lang='ar_001').amount_to_text(o.amount_total)"/>
                                <span>
                                    فقط
                                </span>
                            </div>

                            <div>
                                علي ان يتم التنفيذ وفقا للشروط والمواصفات المطروحه
                            </div>
                            <div>
                                <span>مده التنفيذ</span>
                                <t t-esc="o.implementation_period"/>
                                <span>شهرا تبدا من تاريخ استلام (الموقع / امر الاسناد )</span>
                                <t t-esc="o.location_receipt_date"/>
                            </div>
                            <div>
                                الاسعار : شامله كافه انواع الضرائب والرسوم المقرره
                            </div>

                            <div>
                                <span>الدفعه المقدمه : يتم دفع ما قيمه (</span>
                                <t t-esc="o.down_payment"/>
                                <span>) جنيه دفعه مقدمه تمثل نسبة (</span>
                                <t t-esc="o.down_payment_rate"/>
                                <span>%) مقابل خطاب ضمان بنكي غير مشروط وساري طوال فتره التنفيذ</span>
                            </div>
                            <div>
                                <span>شروط اخري :</span>
                                <t t-esc="o.notes"/>
                            </div>

                            <div>
                                <span>
                                    برجاء التفضل بالإحاطه والتوجيه بما يلزم وسرعه سداد قيمه التأمين النهائي البالغ قيمه
                                    (
                                </span>
                                <t t-esc="o.final_insurance_value"/>
                                <span>)
                                </span>
                                <t t-esc="o.currency_id.with_context(lang='ar_001').amount_to_text(o.final_insurance_value)"/>
                                <span>
                                    فقط والذى يمثل نسبة (
                                </span>
                                <t t-esc="o.final_insurance_value_rate"/>
                                <span>
                                    %) من القيمه الاجماليه في مده لاتتجاوز عشره ايام من تاريخ امر الاسناد
                                </span>
                            </div>

                        </div>


                        <div style="text-align: center">
                            وتفضلوا بقبول وافر التحيه ,,,
                        </div>

                        <div class="row" style="text-align: right;">
                            <div class="col-4"></div>
                            <div class="col-4"></div>
                            <div style="text-align: center;" class="col-4">
                                <strong>
                                    السيد الامين العام للاتحاد
                                </strong>
                                <br></br>
                                <br></br>
                                <strong>
                                    محاسب /
                                </strong>
                            </div>
                        </div>

                    </div>
                </t>
            </t>
        </t>
    </template>
</odoo>
